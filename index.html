<!doctype html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>计划生成器</title>
  <link rel="manifest" href="/manifest.json?v=7">
  <meta name="theme-color" content="#111827">
  <link rel="icon" href="/icons/icon-32.png?v=7" sizes="32x32" type="image/png">
  <link rel="icon" href="/icons/icon-16.png?v=7" sizes="16x16" type="image/png">
  <link rel="apple-touch-icon" href="/icons/icon-180.png?v=7">
</head>
<body>
  <main style="max-width:900px;margin:40px auto;padding:0 16px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.6;">
    <h1>计划生成器</h1>
    <p>在下方输入你的需求，然后点“下一步”。</p>
    <textarea id="prompt" rows="6" style="width:100%;" placeholder="例如：帮我规划三天伦敦行程，包含博物馆、美食和步行路线…"></textarea>

    <div style="margin:12px 0;">
      <button id="genBtn">下一步</button>
      <button id="saveBtn" disabled>保存</button>
      <button id="copyBtn" disabled>复制</button>
      <button id="dlJsonBtn" disabled>下载JSON</button>
      <button id="dlHtmlBtn" disabled>下载HTML</button>
    </div>

    <div id="status" style="margin:8px 0;color:#111;"></div>
    <div id="progBox" style="display:none;margin:8px 0;padding:8px;background:#f3f4f6;border-radius:8px;">生成中…</div>

    <details open>
      <summary>原始 JSON</summary>
      <pre id="raw" style="background:#f6f8fa;padding:12px;border-radius:8px;overflow:auto;"></pre>
    </details>

    <div id="resultBox" style="margin-top:16px;"></div>
  </main>

  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js?v=7').catch(()=>{});
    }
  </script>
  <script src="/app.js?v=7" defer></script>
</body>
</html>
